"use strict";(self.webpackChunkdeveloper_management_system=self.webpackChunkdeveloper_management_system||[]).push([[862],{12862:function(e,r,s){s.r(r),s.d(r,{default:function(){return he}});var t=s(29439),n=s(1413),i=s(47313),a=s(19860),l=s(17551),o=s(24813),d=s(42832),c=s(66835),u=s(23477),p=s(24076),m=s(67478),h=s(57861),x=s(61113),Z=s(66212),g=s(61689),j=s(94469),f=s(45110),y=s(20423),v=s(95548),w=s(43831),b=s(6977),C=s(26624),P=s(17115),S=s(45904),k=s(33604),I=s(19536),F=s(96467),R=s(9019),T=s(5178),E=s(48119),B=s(9506),N=s(24631),q=s(15103),D=s(1550),W=s(88797),_=s(49914),H=s(51405),A=s(83213),z=s(15480),G=s(69099),M=s(4117),K=s(23208),U=s(21933),V=s(35604),O=s(79581),Y=s(1129),L=s(10392),Q=s(31491),$=s(55911),J=s(46417),X=s(5242),ee=["Team Manager","Developer"];function re(e){var r=new Date(e),s=""+(r.getMonth()+1),t=""+r.getDate(),n=r.getFullYear();return s.length<2&&(s="0"+s),t.length<2&&(t="0"+t),[n,s,t].join("-")}var se=function(e){var r=e.customer,s=e.onCancel,l=(0,a.Z)(),o=(0,i.useState)(void 0),c=(0,t.Z)(o,2),u=c[0],p=c[1],m=(0,i.useState)(X("./avatar-1.png")),h=(0,t.Z)(m,2),Z=h[0],g=h[1];(0,i.useEffect)((function(){u&&g(URL.createObjectURL(u))}),[u]);var j=U.Ry().shape({username:U.Z_().max(255).required("User Name is required"),realname:U.Z_().max(255).required("Real Name is required"),netkeyid:U.Z_().max(255).required("NetKeyID is required"),pcpassword:U.Z_().max(255).required("PC-Password is required"),ip:U.Z_().matches(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,"Invalid IP address").required("IP address is required"),birthday:U.hT().required("Birthday is required"),groupid:U.Z_().max(255).required("GroupID is required"),role:U.Z_().max(255).required("Role is required")}),f=function(e){var r={id:"",username:"",realname:"",netkeyid:"",ip:"",pcpassword:"",birthday:re(Date.now().toString()),groupid:1,role:"Developer",emails:[],skills:[]};return e&&(r.id=e._id,r.username=e.username,r.realname=e.realname,r.netkeyid=e.netkeyid,r.ip=e.ip,r.pcpassword=e.pcpassword,r.birthday=re(e.birthday),r.groupid=e.groupid,r.role=e.role),r}(r),y=(0,V.TA)({initialValues:f,validationSchema:j,onSubmit:function(e,t){var n=t.setSubmitting;try{r?((0,O.WI)((0,$.Nq)(e)),(0,O.WI)((0,Y.ss)({open:!0,message:"Customer update successfully.",variant:"alert",alert:{color:"success"},close:!0}))):(0,O.WI)((0,Y.ss)({open:!0,message:"Customer added successfully.",variant:"alert",alert:{color:"success"},close:!1})),n(!1),s()}catch(i){console.error(i)}}});(0,i.useEffect)((function(){y.setValues(f)}),[r]);var v=y.errors,w=y.touched,b=y.isSubmitting,C=y.getFieldProps,P=y.setFieldValue,se=y.values;return(0,J.jsx)(J.Fragment,{children:(0,J.jsx)(V.Hy,{value:y,children:(0,J.jsx)(K._,{dateAdapter:S.y,children:(0,J.jsxs)(V.l0,{autoComplete:"off",noValidate:!0,onSubmit:y.handleSubmit,children:[(0,J.jsx)(k.Z,{children:r?"Edit Customer":"New Customer"}),(0,J.jsx)(I.Z,{}),(0,J.jsx)(F.Z,{sx:{p:2.5},children:(0,J.jsxs)(R.ZP,{container:!0,spacing:3,children:[(0,J.jsx)(R.ZP,{item:!0,xs:12,md:3,children:(0,J.jsxs)(d.Z,{direction:"row",justifyContent:"center",sx:{mt:3},children:[(0,J.jsxs)(T.Z,{htmlFor:"change-avtar",sx:{position:"relative",borderRadius:"50%",overflow:"hidden","&:hover .MuiBox-root":{opacity:1},cursor:"pointer"},children:[(0,J.jsx)(E.Z,{alt:"Avatar 1",src:Z,sx:{width:72,height:72,border:"1px dashed"}}),(0,J.jsx)(B.Z,{sx:{position:"absolute",top:0,left:0,backgroundColor:l.palette.mode===Q.hY.DARK?"rgba(255, 255, 255, .75)":"rgba(0,0,0,.65)",width:"100%",height:"100%",opacity:0,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,J.jsxs)(d.Z,{spacing:.5,alignItems:"center",children:[(0,J.jsx)(L.Z,{style:{color:l.palette.secondary.lighter,fontSize:"2rem"}}),(0,J.jsx)(x.Z,{sx:{color:"secondary.lighter"},children:"Upload"})]})})]}),(0,J.jsx)(N.Z,{type:"file",id:"change-avtar",placeholder:"Outlined",variant:"outlined",sx:{display:"none"},onChange:function(e){var r;return p(null===(r=e.target.files)||void 0===r?void 0:r[0])}})]})}),(0,J.jsx)(R.ZP,{item:!0,xs:12,md:8,children:(0,J.jsxs)(R.ZP,{container:!0,spacing:3,children:[(0,J.jsx)(R.ZP,{item:!0,xs:6,children:(0,J.jsxs)(d.Z,{spacing:1.25,children:[(0,J.jsx)(q.Z,{htmlFor:"customer-realname",children:"User Name"}),(0,J.jsx)(N.Z,(0,n.Z)((0,n.Z)({fullWidth:!0,id:"customer-username",placeholder:"Enter User Name"},C("username")),{},{error:Boolean(w.username&&v.username),helperText:w.username&&v.username}))]})}),(0,J.jsx)(R.ZP,{item:!0,xs:6,children:(0,J.jsxs)(d.Z,{spacing:1.25,children:[(0,J.jsx)(q.Z,{htmlFor:"customer-realname",children:"Real Name"}),(0,J.jsx)(N.Z,(0,n.Z)((0,n.Z)({fullWidth:!0,id:"customer-realname",placeholder:"Enter Real Name"},C("realname")),{},{error:Boolean(w.realname&&v.realname),helperText:w.realname&&v.realname}))]})}),(0,J.jsx)(R.ZP,{item:!0,xs:6,children:(0,J.jsxs)(d.Z,{spacing:1.25,children:[(0,J.jsx)(q.Z,{htmlFor:"customer-netkeyid",children:"NeyKeyID"}),(0,J.jsx)(N.Z,(0,n.Z)((0,n.Z)({fullWidth:!0,id:"customer-netkeyid",placeholder:"Enter NetKeyID"},C("netkeyid")),{},{error:Boolean(w.netkeyid&&v.netkeyid),helperText:w.netkeyid&&v.netkeyid}))]})}),(0,J.jsx)(R.ZP,{item:!0,xs:6,children:(0,J.jsxs)(d.Z,{spacing:1.25,children:[(0,J.jsx)(q.Z,{htmlFor:"customer-pcpassword",children:"PC-Password"}),(0,J.jsx)(N.Z,(0,n.Z)((0,n.Z)({fullWidth:!0,id:"customer-pcpassword",placeholder:"Enter PC-Password"},C("pcpassword")),{},{error:Boolean(w.pcpassword&&v.pcpassword),helperText:w.pcpassword&&v.pcpassword}))]})}),(0,J.jsx)(R.ZP,{item:!0,xs:6,children:(0,J.jsxs)(d.Z,{spacing:1.25,children:[(0,J.jsx)(q.Z,{htmlFor:"customer-ip",children:"IP-Address"}),(0,J.jsx)(N.Z,(0,n.Z)((0,n.Z)({fullWidth:!0,id:"customer-ip",placeholder:"Enter IP-Address"},C("ip")),{},{error:Boolean(w.ip&&v.ip),helperText:w.ip&&v.ip}))]})}),(0,J.jsx)(R.ZP,{item:!0,xs:6,children:(0,J.jsxs)(d.Z,{spacing:1.25,children:[(0,J.jsx)(q.Z,{htmlFor:"customer-birthday",children:"Birthday"}),(0,J.jsx)(N.Z,(0,n.Z)((0,n.Z)({fullWidth:!0,type:"date",id:"customer-birthday",placeholder:"Enter Customer birthday"},C("birthday")),{},{error:Boolean(w.birthday&&v.birthday),helperText:w.birthday&&v.birthday}))]})}),(0,J.jsx)(R.ZP,{item:!0,xs:6,children:(0,J.jsxs)(d.Z,{spacing:1.25,children:[(0,J.jsx)(q.Z,{htmlFor:"customer-groupid",children:"GroupID"}),(0,J.jsx)(N.Z,(0,n.Z)((0,n.Z)({fullWidth:!0,type:"number",id:"customer-groupid",InputProps:{inputProps:{min:1,max:10}},placeholder:"Enter Customer groupid"},C("groupid")),{},{error:Boolean(w.groupid&&v.groupid),helperText:w.groupid&&v.groupid}))]})}),(0,J.jsx)(R.ZP,{item:!0,xs:6,children:(0,J.jsxs)(d.Z,{spacing:1.25,children:[(0,J.jsx)(q.Z,{htmlFor:"customer-orderStatus",children:"Role"}),(0,J.jsx)(D.Z,{fullWidth:!0,children:(0,J.jsx)(W.Z,(0,n.Z)((0,n.Z)({id:"column-hiding",displayEmpty:!0},C("role")),{},{onChange:function(e){return P("role",e.target.value)},input:(0,J.jsx)(_.Z,{id:"select-column-hiding",placeholder:"Sort by"}),renderValue:function(e){return e?(0,J.jsx)(x.Z,{variant:"subtitle2",children:e}):(0,J.jsx)(x.Z,{variant:"subtitle1",children:"Select Role"})},children:ee.map((function(e){return(0,J.jsx)(H.Z,{value:e,children:(0,J.jsx)(A.Z,{primary:e})},e)}))}))}),w.netkeyid&&v.netkeyid&&(0,J.jsx)(z.Z,{error:!0,id:"standard-weight-helper-text-email-login",sx:{pl:1.75},children:v.netkeyid})]})}),(0,J.jsx)(V.F2,{name:"emails",children:function(e){e.insert,e.remove;var r=e.push;return(0,J.jsxs)(J.Fragment,{children:[se.emails.length>0&&se.emails.map((function(e,r){return(0,J.jsxs)(i.Fragment,{children:[(0,J.jsx)(R.ZP,{item:!0,xs:6,children:(0,J.jsxs)(d.Z,{spacing:1.25,children:[(0,J.jsx)(q.Z,{htmlFor:"customer-email",children:"Email"}),(0,J.jsx)(N.Z,(0,n.Z)({fullWidth:!0,type:"email",id:"customer-email",placeholder:"Enter Email"},C("emails.".concat(r,".email"))))]})}),(0,J.jsx)(R.ZP,{item:!0,xs:6,children:(0,J.jsxs)(d.Z,{spacing:1.25,children:[(0,J.jsx)(q.Z,{htmlFor:"customer-password",children:"Password"}),(0,J.jsx)(N.Z,(0,n.Z)({fullWidth:!0,type:"password",id:"customer-password",placeholder:"Enter Email Password"},C("emails.".concat(r,".password"))))]})})]},r)})),(0,J.jsx)(R.ZP,{item:!0,xs:6,children:(0,J.jsx)(d.Z,{spacing:1.25,justifyContent:"space-between",alignItems:"flex-start",children:(0,J.jsx)(G.Z,{type:"button",variant:"contained",disabled:b,onClick:function(){return r({email:"",password:""})},children:"Add Email"})})})]})}})]})})]})}),(0,J.jsx)(I.Z,{}),(0,J.jsx)(M.Z,{sx:{p:2.5},children:(0,J.jsxs)(R.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,J.jsx)(R.ZP,{item:!0}),(0,J.jsx)(R.ZP,{item:!0,children:(0,J.jsxs)(d.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,J.jsx)(G.Z,{color:"error",onClick:s,children:"Cancel"}),(0,J.jsx)(G.Z,{type:"submit",variant:"contained",disabled:b,children:r?"Edit":"Add"})]})})]})})]})})})})},te=s(70871),ne=s(44450),ie=s(26446);function ae(e){var r=e.title,s=e.name,t=e.open,n=e.handleClose,i=(0,O.I0)();return(0,J.jsx)(j.Z,{open:t,onClose:function(){return n(!1)},keepMounted:!0,TransitionComponent:C.S,maxWidth:"xs","aria-labelledby":"column-delete-title","aria-describedby":"column-delete-description",children:(0,J.jsx)(F.Z,{sx:{mt:2,my:1},children:(0,J.jsxs)(d.Z,{alignItems:"center",spacing:3.5,children:[(0,J.jsx)(w.Z,{color:"error",sx:{width:72,height:72,fontSize:"1.75rem"},children:(0,J.jsx)(ie.Z,{})}),(0,J.jsxs)(d.Z,{spacing:2,children:[(0,J.jsx)(x.Z,{variant:"h4",align:"center",children:"Are you sure you want to delete?"}),(0,J.jsxs)(x.Z,{align:"center",children:["By deleting",(0,J.jsxs)(x.Z,{variant:"subtitle1",component:"span",children:[" ",'"',s,'"'," "]}),"user, all task assigned to that user will also be deleted."]})]}),(0,J.jsxs)(d.Z,{direction:"row",spacing:2,sx:{width:1},children:[(0,J.jsx)(G.Z,{fullWidth:!0,onClick:function(){return n(!1)},color:"secondary",variant:"outlined",children:"Cancel"}),(0,J.jsx)(G.Z,{fullWidth:!0,color:"error",variant:"contained",onClick:function(){ne.Z.delete("/api/user/delete/".concat(r)).then((function(){setTimeout((function(){return i((0,$.Rf)())}),100),n(!0)})).catch((function(e){return console.log(e)}))},autoFocus:!0,children:"Delete"})]})]})})})}var le=s(43394),oe=s(11829),de=s(50294),ce=s(41627),ue=s(45460),pe=s(5242);function me(e){var r=e.columns,s=e.data,t=e.renderRowSubComponent,x=(e.handleAdd,e.getHeaderProps),Z=(0,a.Z)(),g=(0,o.Z)(Z.breakpoints.down("sm")),j=(0,i.useMemo)((function(){return le.KR}),[]),y={id:"groupid",desc:!1},v=(0,f.useTable)({columns:r,data:s,filterTypes:j,initialState:{pageIndex:0,pageSize:10,hiddenColumns:["avatar","email","_id"],sortBy:[y]}},f.useGlobalFilter,f.useFilters,f.useSortBy,f.useExpanded,f.usePagination,f.useRowSelect),w=v.getTableProps,b=v.getTableBodyProps,C=v.headerGroups,S=v.prepareRow,k=v.setHiddenColumns,I=v.allColumns,F=v.visibleColumns,R=v.rows,T=v.page,E=v.gotoPage,B=v.setPageSize,N=v.state,q=N.globalFilter,D=N.selectedRowIds,W=N.pageIndex,_=N.pageSize,H=N.expanded,A=v.preGlobalFilteredRows,z=v.setGlobalFilter,G=v.setSortBy,M=v.selectedFlatRows;return(0,i.useEffect)((function(){k(g?["age","contact","visits","email","status","avatar","_id"]:["avatar","email","_id"])}),[g]),(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(P.c,{selected:Object.keys(D).length}),(0,J.jsxs)(d.Z,{spacing:3,children:[(0,J.jsxs)(d.Z,{direction:g?"column":"row",spacing:1,justifyContent:"space-between",alignItems:"center",sx:{p:3,pb:0},children:[(0,J.jsx)(le.KO,{preGlobalFilteredRows:A,globalFilter:q,setGlobalFilter:z,size:"small"}),(0,J.jsxs)(d.Z,{direction:g?"column":"row",alignItems:"center",spacing:1,children:[(0,J.jsx)(P.Ty,{sortBy:y.id,setSortBy:G,allColumns:I}),(0,J.jsx)(P.ZZ,{data:M.length>0?M.map((function(e){return e.original})):s,filename:"customer-list.csv"})]})]}),(0,J.jsxs)(c.Z,(0,n.Z)((0,n.Z)({},w()),{},{children:[(0,J.jsx)(u.Z,{children:C.map((function(e){return(0,J.jsx)(p.Z,(0,n.Z)((0,n.Z)({},e.getHeaderGroupProps()),{},{sx:{"& > th:first-of-type":{width:"58px"}},children:e.headers.map((function(e){return(0,J.jsx)(m.Z,(0,n.Z)((0,n.Z)({},e.getHeaderProps([{className:e.className},x(e)])),{},{children:(0,J.jsx)(P.RL,{column:e})}))}))}))}))}),(0,J.jsxs)(h.Z,(0,n.Z)((0,n.Z)({},b()),{},{children:[T.map((function(e,r){S(e);var s=e.getRowProps();return(0,J.jsxs)(i.Fragment,{children:[(0,J.jsx)(p.Z,(0,n.Z)((0,n.Z)({},e.getRowProps()),{},{onClick:function(){e.toggleRowSelected()},sx:{cursor:"pointer",bgcolor:e.isSelected?(0,l.Fq)(Z.palette.primary.lighter,.35):"inherit"},children:e.cells.map((function(e){return(0,J.jsx)(m.Z,(0,n.Z)((0,n.Z)({},e.getCellProps([{className:e.column.className}])),{},{children:e.render("Cell")}))}))})),e.isExpanded&&t({row:e,rowProps:s,visibleColumns:F,expanded:H})]},r)})),(0,J.jsx)(p.Z,{sx:{"&:hover":{bgcolor:"transparent !important"}},children:(0,J.jsx)(m.Z,{sx:{p:2,py:3},colSpan:9,children:(0,J.jsx)(P.bG,{gotoPage:E,rows:R,setPageSize:B,pageSize:_,pageIndex:W})})})]}))]}))]})]})}var he=function(){var e=(0,a.Z)(),r=(0,O.v9)((function(e){return e.auth.user})),s=(0,i.useState)(!1),l=(0,t.Z)(s,2),o=l[0],c=l[1],u=(0,i.useState)(null),p=(0,t.Z)(u,2),m=p[0],h=p[1],f=(0,i.useState)(""),S=(0,t.Z)(f,2),k=S[0],I=S[1],F=(0,i.useState)(""),R=(0,t.Z)(F,2),T=R[0],E=R[1],B=(0,i.useState)(!1),N=(0,t.Z)(B,2),q=N[0],D=N[1],W=(0,O.v9)((function(e){return e.users.users})),_=(0,O.I0)();(0,i.useEffect)((function(){"admin"===(null===r||void 0===r?void 0:r.role)&&setTimeout((function(){return _((0,$.Rf)())}),100),"Team Manager"===(null===r||void 0===r?void 0:r.role)&&setTimeout((function(){return _((0,$.QZ)(null===r||void 0===r?void 0:r.groupid))}),100)}),[_,null===r||void 0===r?void 0:r.groupid,null===r||void 0===r?void 0:r.role]);var H=function(){D(!q),m&&!q&&h(null)},A=function(){c(!o)},z=(0,i.useMemo)((function(){return[{title:"Row Selection",Header:function(e){var r=e.getToggleAllPageRowsSelectedProps;return(0,J.jsx)(P.YQ,(0,n.Z)({indeterminate:!0},r()))},accessor:"selection",Cell:function(e){var r=e.row;return(0,J.jsx)(P.YQ,(0,n.Z)({},r.getToggleRowSelectedProps()))},disableSortBy:!0},{Header:"#",accessor:"_id",className:"cell-center"},{Header:"User Name",accessor:"username",Cell:function(e){var r=e.row.values;return(0,J.jsxs)(d.Z,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,J.jsx)(w.Z,{alt:"Avatar 1",size:"sm",src:pe("./avatar-".concat(r.avatar?r.avatar:1,".png"))}),(0,J.jsx)(d.Z,{spacing:0,children:(0,J.jsx)(x.Z,{variant:"subtitle1",children:r.username})})]})}},{Header:"Real Name",accessor:"realname"},{Header:"NetKeyID",accessor:"netkeyid"},{Header:"IP",accessor:"ip"},{Header:"PC-Password",accessor:"pcpassword",disableSortBy:!0},{Header:"Birthday",accessor:"birthday",Cell:function(e){var r=e.row.values.birthday.toString();return(0,J.jsx)(d.Z,{direction:"row",spacing:1.5,alignItems:"center",children:(0,J.jsx)(d.Z,{spacing:0,children:(0,J.jsx)(x.Z,{variant:"subtitle1",children:r.slice(0,10)})})})}},{Header:"GroupID",accessor:"groupid"},{Header:"Role",accessor:"role",Cell:function(e){switch(e.value){case"Team Manager":return(0,J.jsx)(Z.Z,{color:"error",label:"Team Manager",size:"small",variant:"light"});case"Developer":return(0,J.jsx)(Z.Z,{color:"success",label:"Developer",size:"small",variant:"light"});default:return(0,J.jsx)(Z.Z,{color:"info",label:"Admin",size:"small",variant:"light"})}}},{Header:"Actions",className:"cell-center",disableSortBy:!0,Cell:function(s){var t=s.row,n=t.isExpanded?(0,J.jsx)(oe.Z,{style:{color:e.palette.error.main}}):(0,J.jsx)(de.Z,{twoToneColor:e.palette.secondary.main});return(0,J.jsxs)(d.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:0,children:[(0,J.jsx)(g.Z,{title:"View",children:(0,J.jsx)(b.Z,{color:"secondary",onClick:function(e){e.stopPropagation(),t.toggleRowExpanded()},children:n})}),"admin"===(null===r||void 0===r?void 0:r.role)&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(g.Z,{title:"Edit",children:(0,J.jsx)(b.Z,{color:"primary",onClick:function(e){e.stopPropagation(),h(t.values),H()},children:(0,J.jsx)(ce.Z,{twoToneColor:e.palette.primary.main})})}),(0,J.jsx)(g.Z,{title:"Delete",children:(0,J.jsx)(b.Z,{color:"error",onClick:function(e){e.stopPropagation(),A(),I(t.values._id),E(t.values.realname)},children:(0,J.jsx)(ue.Z,{twoToneColor:e.palette.error.main})})})]})]})}}]}),[e]),G=(0,i.useCallback)((function(e){var r=e.row;return(0,J.jsx)(te.Z,{data:W[Number(r.id)]})}),[W]);return(0,J.jsxs)(y.Z,{content:!1,children:[(0,J.jsx)(v.Z,{children:(0,J.jsx)(me,{columns:z,data:W,handleAdd:H,renderRowSubComponent:G,getHeaderProps:function(e){return e.getSortByToggleProps()}})}),(0,J.jsx)(ae,{title:k,name:T,open:o,handleClose:A}),(0,J.jsx)(j.Z,{maxWidth:"sm",TransitionComponent:C.S,keepMounted:!0,fullWidth:!0,onClose:H,open:q,sx:{"& .MuiDialog-paper":{p:0},transition:"transform 225ms"},"aria-describedby":"alert-dialog-slide-description",children:(0,J.jsx)(se,{customer:m,onCancel:H})})]})}}}]);