"use strict";(self.webpackChunkdeveloper_management_system=self.webpackChunkdeveloper_management_system||[]).push([[560],{60515:function(e,t,r){r.d(t,{Z:function(){return L}});var n=r(74165),i=r(15861),s=r(29439),o=r(73428),l=r(9019),a=r(42832),c=r(61113),d=r(57451),u=r(19536),p=r(47131),x=r(94469),h=r(33604),m=r(96467),Z=r(15480),j=r(24631),f=r(4117),g=r(69099),v=r(97762),y=r(56104),k=r(54832),b=r(6481),_=r(94425),C=r(50494),w=r(68080),S=r(49959),T=r(47313),P=r(15743),F=r(4942),W=r(1413),D=r(45987),I=r(9506),R=r(98668),z=r(94808),A=r(46417),q=["value","size","variant","thickness","showLabel","pathColor","sx"];function E(e){var t=e.value,r=e.size,n=e.variant,i=e.thickness,s=e.showLabel,o=e.pathColor,l=e.sx,a=(0,D.Z)(e,q);return(0,A.jsxs)(I.Z,{sx:{position:"relative",display:"inline-flex"},children:[(0,A.jsx)(R.Z,(0,W.Z)((0,W.Z)({variant:"determinate",sx:{color:o||"grey.200"},size:r,thickness:i},a),{},{value:100})),s&&(0,A.jsx)(I.Z,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,A.jsx)(c.Z,{variant:"caption",component:"div",color:"text.secondary",children:t?"".concat(Math.round(t),"%"):"0%"})}),(0,A.jsx)(R.Z,(0,W.Z)({variant:n,sx:(0,W.Z)((0,W.Z)({},l),{},(0,F.Z)({position:"absolute",left:0},"& .".concat(z.Z.circle),{strokeLinecap:"round"})),size:r,thickness:i,value:t},a))]})}var H=r(44450),N=r(79581),B=r(1129),O=r(58467);var L=function(e){var t,r,F,W=e.TaskCard,D=(0,T.useState)(!1),I=(0,s.Z)(D,2),R=I[0],z=I[1],q=(0,T.useState)(!1),L=(0,s.Z)(q,2),M=L[0],V=L[1],G=(0,T.useState)(100===W.percentage?"#00ff00":"#f0f0f0"),Y=(0,s.Z)(G,2),K=Y[0],J=Y[1],X=(0,T.useState)(100===W.percentage),Q=(0,s.Z)(X,2),U=Q[0],$=Q[1],ee=(0,T.useState)(W.percentage),te=(0,s.Z)(ee,2),re=te[0],ne=te[1],ie=(0,T.useState)("#333333"),se=(0,s.Z)(ie,2),oe=se[0],le=se[1],ae=W.isPersonal,ce=(0,T.useState)(!1),de=(0,s.Z)(ce,2),ue=de[0],pe=de[1],xe=(0,T.useState)(W.content.split("\n")[0]),he=(0,s.Z)(xe,2),me=he[0],Ze=he[1],je=(0,O.s0)();(0,T.useEffect)((function(){ne(W.percentage),0===W.percentage?le("#cc3333"):100===W.percentage?le("#33cc33"):le("#3333cc"),2===W.task_type.report_type&&le("#00cccc")}),[W.content,W.percentage,W.task_type.report_type]);var fe=function(e){var t=e.target.value;Number(t)>100||Number(t)<0?ne(0):ne(Number(t))},ge=function(){J("#f0f0f0"),pe(!1),ne(re)},ve=function(){ae?pe(!0):je("/task/edit/".concat(W._id))},ye=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(100),$(!0),e.next=4,H.Z.post("api/task/update/".concat(W._id),{percentage:100});case 4:t=e.sent,window.location.reload(),200===t.status?(0,N.WI)((0,B.ss)({open:!0,message:"You have completed.",variant:"alert",alert:{color:"success"},close:!0})):(0,N.WI)((0,B.ss)({open:!0,message:"Server has some problems.",variant:"alert",alert:{color:"error"},close:!0})),pe(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!1),ne(re),e.next=4,H.Z.post("api/task/update/".concat(W._id),{percentage:re});case 4:t=e.sent,window.location.reload(),200===t.status?(0,N.WI)((0,B.ss)({open:!0,message:"You have done "+Number(re)+"%.",variant:"alert",alert:{color:"success"},close:!0})):(0,N.WI)((0,B.ss)({open:!0,message:"Server has some problems.",variant:"alert",alert:{color:"error"},close:!0})),pe(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(o.Z,{sx:{width:1,shadow:5},style:{textAlign:"left",borderRadius:"5px",border:"1px solid ".concat(oe),padding:"15px 15px 0px 15px",minWidth:"360px"},children:[(0,A.jsxs)(l.ZP,{container:!0,rowSpacing:3,columnSpacing:3,children:[(0,A.jsxs)(l.ZP,{item:!0,xs:!0,md:!0,sm:!0,lg:!0,rowSpacing:3,children:[(0,A.jsxs)(a.Z,{direction:"row",justifyContent:"space-between",marginTop:1,marginY:0,children:[(0,A.jsxs)(a.Z,{direction:"row",spacing:1,style:{alignItems:"end",width:"65%"},children:[(0,A.jsx)(c.Z,{sx:{display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:1},fontSize:18,width:"65%",style:{cursor:"pointer"},onClick:function(){return je("/task/edit/".concat(W._id))},children:W.title}),(0,A.jsxs)(d.Z,{mdDown:!0,children:[(0,A.jsx)(u.Z,{orientation:"vertical",flexItem:!0,sx:{borderRightWidth:1},style:{borderColor:oe}}),(0,A.jsx)(c.Z,{sx:{display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:1},fontSize:16,style:{alignItems:"end"},width:"35%",children:null===W||void 0===W||null===(t=W.task_type)||void 0===t?void 0:t.mini_type})]})]}),(0,A.jsx)(d.Z,{mdDown:!0,children:(0,A.jsx)(a.Z,{direction:"row",spacing:1,children:(0,A.jsxs)(c.Z,{sx:{display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:1},fontSize:15,style:{alignSelf:"flex-end"},children:[null===(r=W.from_date)||void 0===r?void 0:r.slice(0,10).replaceAll("-","/")," ~ ",null===(F=W.to_date)||void 0===F?void 0:F.slice(0,10).replaceAll("-","/")]})})})]}),(0,A.jsx)(P.Z,{style:{overflowY:"auto",maxHeight:"640px",display:"flex",flexGrow:1,flexDirection:"column"},children:(0,A.jsx)("div",{dangerouslySetInnerHTML:{__html:me},style:{borderTop:"".concat(oe," solid 1px"),marginTop:"8px"}})})]}),(0,A.jsxs)(l.ZP,{item:!0,textAlign:"center",children:[(0,A.jsx)(l.ZP,{marginTop:1,children:(0,A.jsx)(c.Z,{})}),(0,A.jsxs)(l.ZP,{marginTop:2,children:[0===W.task_type.report_type&&!U&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(p.Z,{onClick:ve,children:(0,A.jsx)(E,{size:45,showLabel:!0,variant:"determinate",value:re,sx:{color:oe}})}),(0,A.jsx)(x.Z,{open:ue,onClose:ge,"aria-labelledby":"draggable-dialog-title",children:(0,A.jsxs)(P.Z,{sx:{p:1,py:1.5},children:[(0,A.jsx)(h.Z,{id:"draggable-dialog-title",children:"Percentage of task."}),(0,A.jsxs)(m.Z,{children:[(0,A.jsx)(Z.Z,{children:"Enter percent"}),(0,A.jsx)(j.Z,{type:"number",size:"medium",value:re,onChange:fe,InputProps:{inputProps:{min:0,max:100}},InputLabelProps:{shrink:!0},placeholder:"%",onKeyDown:function(e){"Enter"===e.key&&re&&re<100&&re>0&&ke()}})]}),(0,A.jsxs)(f.Z,{children:[(0,A.jsx)(g.Z,{color:"error",onClick:ge,children:"Cancel"}),(0,A.jsx)(g.Z,{variant:"contained",onClick:ke,children:"Ok"})]})]})})]}),0===W.task_type.report_type&&U&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(p.Z,{children:(0,A.jsx)(E,{size:45,showLabel:!0,variant:"determinate",value:re,sx:{color:oe}})})}),1===W.task_type.report_type&&!U&&ae&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(p.Z,{sx:{color:K},onClick:function(){ae&&(J("#00ff00"),pe(!0))},children:(0,A.jsx)(b.Z,{sx:{fontSize:"40px"}})}),(0,A.jsx)(x.Z,{open:ue,"aria-labelledby":"responsive-dialog-title",children:(0,A.jsxs)(P.Z,{sx:{p:1,py:1.5},children:[(0,A.jsx)(h.Z,{id:"responsive-dialog-title",children:"Have you done this task?"}),(0,A.jsx)(m.Z,{children:(0,A.jsx)(v.Z,{children:"Please confirm your task again. Have you done?"})}),(0,A.jsxs)(f.Z,{children:[(0,A.jsx)(g.Z,{color:"error",onClick:ge,children:"Cancel"}),(0,A.jsx)(g.Z,{variant:"contained",onClick:ye,autoFocus:!0,children:"Ok"})]})]})})]}),1===W.task_type.report_type&&!U&&!ae&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(p.Z,{onClick:ve,children:(0,A.jsx)(E,{size:45,showLabel:!0,variant:"determinate",value:re,sx:{color:oe}})})}),1===W.task_type.report_type&&U&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(b.Z,{sx:{fontSize:"40px"},color:"success"})}),2===W.task_type.report_type&&(0,A.jsx)(p.Z,{color:"info",style:{cursor:"default",fontSize:"40px",paddingRight:"13px"},children:(0,A.jsx)(S.Z,{})})]})]})]}),(0,A.jsxs)(y.Z,{style:{display:"flex",justifyContent:"space-between",paddingTop:"0px"},children:[(0,A.jsx)(P.Z,{children:(0,A.jsx)(k.Z,{style:{float:"left"},name:"customized-10",defaultValue:W.priority?W.priority:1,max:3,readOnly:!0})}),(0,A.jsxs)(P.Z,{children:[(0,A.jsx)(p.Z,{size:"small",onClick:function(){Ze(M?W.content.split("\n")[0]:W.content),V(!M)},color:"secondary",children:M?(0,A.jsx)(_.Z,{}):(0,A.jsx)(C.Z,{})}),!0===R&&0===W.task_type.report_type&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(p.Z,{color:"warning",onClick:ke,sx:{float:"right"},children:(0,A.jsx)(w.Z,{})}),(0,A.jsx)(j.Z,{type:"number",size:"small",value:re,onChange:fe,InputProps:{inputProps:{min:0,max:100}},sx:{float:"right"},InputLabelProps:{shrink:!0},placeholder:"%",contentEditable:!0})]})]})]})]})})}},83560:function(e,t,r){r.r(t),r.d(t,{default:function(){return Fe}});var n=r(20423),i=r(29439),s=r(1413),o=r(47313),l=r(19860),a=r(17551),c=r(68728),d=r(22955),u=r(28718),p=r(53934),x=r(24813),h=r(42832),m=r(66835),Z=r(23477),j=r(24076),f=r(67478),g=r(57861),v=r(61113),y=r(61689),k=r(69099),b=r(94469),_=r(45110),C=r(95548),w=r(6977),S=r(26624),T=r(17115),P=r(70871),F=r(96467),W=r(43831),D=r(44450),I=r(79581),R=r(41709),z=r(96944),A=r(46417);function q(e){var t=e.title,r=e.name,n=e.open,i=e.handleClose,s=e.isRestore,o=(0,I.I0)();return(0,A.jsx)(b.Z,{open:n,onClose:function(){return i(!1)},keepMounted:!0,TransitionComponent:S.S,maxWidth:"xs","aria-labelledby":"column-delete-title","aria-describedby":"column-delete-description",children:(0,A.jsx)(F.Z,{sx:{mt:2,my:1},children:(0,A.jsxs)(h.Z,{alignItems:"center",spacing:3.5,children:[(0,A.jsx)(W.Z,{color:"error",sx:{width:72,height:72,fontSize:"1.75rem"},children:s?(0,A.jsx)(p.Z,{}):(0,A.jsx)(z.Z,{})}),(0,A.jsxs)(h.Z,{spacing:2,children:[(0,A.jsx)(v.Z,{variant:"h4",align:"center",children:s?"Are you sure want to archive this task?":"Are you sure want to restore?"}),(0,A.jsxs)(v.Z,{align:"center",children:[s?"This task will be archived":"This task will be restored",(0,A.jsxs)(v.Z,{variant:"subtitle1",component:"span",children:[" ",'"',r,'"'," "]})]})]}),(0,A.jsxs)(h.Z,{direction:"row",spacing:2,sx:{width:1},children:[(0,A.jsx)(k.Z,{fullWidth:!0,onClick:function(){return i(!1)},color:"secondary",variant:"outlined",children:"Cancel"}),(0,A.jsx)(k.Z,{fullWidth:!0,color:"success",variant:"contained",onClick:function(){s?D.Z.delete("/api/task/".concat(t)).then((function(){setTimeout((function(){return o((0,R.km)())}),100),setTimeout((function(){return o((0,R.Pe)())}),100),i(!0)})).catch((function(e){return console.log(e)})):D.Z.post("/api/task/restore/".concat(t)).then((function(){setTimeout((function(){return o((0,R.km)())}),100),setTimeout((function(){return o((0,R.Pe)())}),100),i(!0)})).catch((function(e){return console.log(e)}))},autoFocus:!0,children:s?"Convert":"Restore"})]})]})})})}var E=r(43394),H=r(41627),N=r(4942),B=r(93433),O=r(55685),L=r(23501),M=r(52500),V=(r(85453),r(60686)),G=r(95456),Y=function(e){var t=e.placeholder,r=e.getContent,n=e.initialValue,s=(0,o.useState)((function(){return M.EditorState.createWithContent(M.ContentState.createFromText(""))})),l=(0,i.Z)(s,2),a=l[0],c=l[1];return(0,o.useEffect)((function(){var e=(0,G.M)(n);c(M.EditorState.createWithContent(e))}),[n]),(0,A.jsx)(L.Editor,{editorState:a,toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:function(e){c(e),r((0,V.E)(e.getCurrentContent()))},placeholder:t,editorStyle:{padding:5,height:200},wrapperStyle:{borderColor:"#F1F1F1",borderWidth:1,borderStyle:"solid",padding:2}})},K=r(31491),J=r(74268),X=r(83929),Q=r(51146),U=r(23208),$=r(1129),ee=r(21933),te=r(76767),re=r(33604),ne=r(19536),ie=r(9019),se=r(15103),oe=r(24631),le=r(15480),ae=r(1550),ce=r(88797),de=r(51405),ue=r(54832),pe=r(48623),xe=r(9506),he=r(66212),me=r(4117),Ze=r(35604),je=r(11829),fe=r(20052),ge=function(e){var t=new Date(e),r=""+(t.getMonth()+1),n=""+(t.getDate()+1),i=t.getFullYear();return r.length<2&&(r="0"+r),n.length<2&&(n="0"+n),[i,r,n].join("-")},ve=function(e){var t,r=e.users,n=e.customer,a=e.onCancel,c=ee.Ry().shape({task_type:ee.Ry().shape({total_type:ee.Z_().max(255).min(1).required("Total Type is required"),mini_type:ee.Z_().max(255).min(1).required("Mini Type is required"),report_type:ee.Z_().max(255).required("Report Type is required")}),from_date:ee.hT().min(1).required("From date is required"),to_date:ee.hT().min(1).required("To Date is required"),priority:ee.Rx().min(1).max(3).required("Priority is required"),title:ee.Z_().max(255).min(1).required("Title is required"),content:ee.Z_().required("Content is required"),grouped:ee.Z_().required("Group is required"),allocDevs:ee.IX().min(1).required("Allocated Developers is required")}),d=(0,l.Z)(),u=(0,o.useState)(!1),p=(0,i.Z)(u,2),x=p[0],m=p[1],Z=(0,o.useState)(!1),j=(0,i.Z)(Z,2),f=j[0],g=j[1],y=(0,o.useState)(""),b=(0,i.Z)(y,2),_=b[0],C=b[1],w=(0,o.useState)(),S=(0,i.Z)(w,2),T=S[0],P=S[1],W=(0,o.useState)(),D=(0,i.Z)(W,2),z=D[0],q=D[1],E=(0,o.useState)(),H=(0,i.Z)(E,2),L=H[0],M=H[1],V=(0,o.useState)(),G=(0,i.Z)(V,2),ve=G[0],ye=G[1],ke=[],be=function(e){var t=L||Object.assign.apply(Object,[{}].concat((0,B.Z)(r.data.map((function(e){return(0,N.Z)({},e.groupid+"-"+e.realname,e._id)})))));for(var n in t)if(t[n]===e)return n},_e=function(e){C(e.target.value),Ce.setFieldValue("grouped",_)};(0,o.useEffect)((function(){P(r.data.map((function(e){return e.groupid+"-"+e.realname}))),M(Object.assign.apply(Object,[{}].concat((0,B.Z)(r.data.map((function(e){return(0,N.Z)({},e.groupid+"-"+e.realname,e._id)})))))),q(r.data.map((function(e){return"Team Manager"===e.role?e.groupid+"-"+e.realname:""})).filter((function(e){return""!==e}))),ye(n?null===n||void 0===n?void 0:n.content:"")}),[n]);var Ce=(0,Ze.TA)({initialValues:function(e){var t={_id:"",task_type:{total_type:"Task",mini_type:"Study",report_type:0},from_date:ge(new Date(Date.now()).toString()),to_date:ge(new Date(Date.now()).toString()),priority:1,title:"",content:"",grouped:"",allocDevs:[]};return e&&(t._id=e._id,t.task_type.total_type=e["task_type.total_type"],t.task_type.mini_type=e["task_type.mini_type"],t.task_type.report_type=e["task_type.report_type"],t.from_date=ge(e.from_date),t.to_date=ge(e.to_date),t.priority=e.priority,t.title=e.title,t.content=e.content,t.grouped=_,t.allocDevs=e.allocDevs),t}(n),validationSchema:c,onSubmit:function(e,t){var r=t.setSubmitting;try{r(!0),a()}catch(n){console.error(n)}}}),we=(0,te.D)(),Se=Ce.errors,Te=Ce.touched,Pe=Ce.isSubmitting,Fe=Ce.values,We=Ce.getFieldProps;return(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(Ze.Hy,{value:Ce,children:(0,A.jsx)(U._,{dateAdapter:Q.H,children:(0,A.jsxs)(Ze.l0,{autoComplete:"off",noValidate:!0,onSubmit:Ce.handleSubmit,children:[(0,A.jsx)(re.Z,{children:n?"Edit Task":"New Task"}),(0,A.jsx)(ne.Z,{}),(0,A.jsx)(F.Z,{sx:{p:2.5},children:(0,A.jsxs)(ie.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,A.jsx)(ie.ZP,{item:!0,xs:12,lg:8,children:(0,A.jsxs)(h.Z,{spacing:.5,children:[(0,A.jsx)(se.Z,{children:"Title"}),(0,A.jsx)(oe.Z,(0,s.Z)((0,s.Z)({fullWidth:!0,id:"task-title",placeholder:"Enter task title"},We("title")),{},{error:Boolean(Te.title&&Se.title),helperText:Te.title&&Se.title})),(0,A.jsx)(le.Z,{children:"Please enter your project title"})]})}),(0,A.jsx)(ie.ZP,{item:!0,xs:12,lg:2,children:(0,A.jsxs)(h.Z,{spacing:.5,children:[(0,A.jsx)(se.Z,{children:"Type"}),(0,A.jsx)(ae.Z,{sx:{m:1,minWidth:120},children:(0,A.jsxs)(ce.Z,(0,s.Z)((0,s.Z)({id:"task-total",fullWidth:!0,placeholder:"Select total type"},We("task_type.total_type")),{},{children:[(0,A.jsx)(de.Z,{value:"Task",children:"Task"}),(0,A.jsx)(de.Z,{value:"Project",children:"Project"})]}))}),(0,A.jsx)(le.Z,{children:"Please select type"})]})}),(0,A.jsx)(ie.ZP,{item:!0,xs:12,lg:2,children:(0,A.jsxs)(h.Z,{spacing:.5,children:[(0,A.jsx)(se.Z,{children:"Task type"}),(0,A.jsx)(ae.Z,{sx:{m:1,minWidth:120},children:(0,A.jsxs)(ce.Z,(0,s.Z)((0,s.Z)({id:"mini_type",fullWidth:!0,placeholder:"Select task type"},We("task_type.mini_type")),{},{children:[(0,A.jsx)(de.Z,{value:"Study",children:"Study"}),(0,A.jsx)(de.Z,{value:"Management",children:"Management"}),(0,A.jsx)(de.Z,{value:"Project",children:"Project"})]}))}),(0,A.jsx)(le.Z,{children:"Please select your task type"})]})}),(0,A.jsx)(ie.ZP,{item:!0,xs:12,lg:8,sx:{height:"100%","& .quill":(0,s.Z)({bgcolor:d.palette.mode===K.hY.DARK?"dark.main":"grey.50",borderRadius:"4px","& .ql-toolbar":{bgcolor:d.palette.mode===K.hY.DARK?"dark.light":"grey.100",borderColor:d.palette.divider,borderTopLeftRadius:"4px",borderTopRightRadius:"4px"},"& .ql-container":{borderColor:"".concat(d.palette.divider," !important"),borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px","& .ql-editor":{minHeight:"200px"}}},d.direction===K.xk.RTL&&{"& .ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg":{right:"0%",left:"inherit"}})},children:(0,A.jsx)(Y,{placeholder:"Enter task content",getContent:function(e){Ce.setFieldValue("content",e)},initialValue:ve})}),(0,A.jsxs)(ie.ZP,{item:!0,xs:12,lg:4,spacing:3,container:!0,children:[(0,A.jsx)(ie.ZP,{item:!0,xs:12,lg:6,container:!0,children:(0,A.jsxs)(h.Z,{spacing:.5,children:[(0,A.jsx)(se.Z,{children:"Priority"}),(0,A.jsx)(ue.Z,(0,s.Z)((0,s.Z)({id:"task-priority"},We("priority")),{},{defaultValue:1,max:3}))]})}),(0,A.jsx)(ie.ZP,{item:!0,xs:12,lg:6,container:!0,children:(0,A.jsxs)(h.Z,{spacing:.5,minWidth:"100%",children:[(0,A.jsx)(se.Z,{children:"Report method"}),(0,A.jsx)(ae.Z,{sx:{m:1,minWidth:120},children:(0,A.jsxs)(ce.Z,(0,s.Z)((0,s.Z)({id:"task-report_type",fullWidth:!0,placeholder:"Select report type"},We("task_type.report_type")),{},{displayEmpty:!0,inputProps:{"aria-label":"Without label"},children:[(0,A.jsx)(de.Z,{value:0,children:"percentage"}),(0,A.jsx)(de.Z,{value:1,children:"checkout"}),(0,A.jsx)(de.Z,{value:2,children:"message"})]}))}),(0,A.jsx)(le.Z,{children:"Please select report method"})]})}),(0,A.jsx)(ie.ZP,{item:!0,xs:12,lg:6,container:!0,children:(0,A.jsxs)(h.Z,{spacing:.5,children:[(0,A.jsx)(se.Z,{children:"From"}),(0,A.jsx)(U._,{dateAdapter:Q.H,children:(0,A.jsx)(oe.Z,(0,s.Z)((0,s.Z)({type:"date",id:"from_date",placeholder:"Enter task from date"},We("from_date")),{},{error:Boolean(Te.from_date&&Se.from_date)}))}),(0,A.jsx)(le.Z,{children:"Please select date the task should start"})]})}),(0,A.jsx)(ie.ZP,{item:!0,xs:12,lg:6,container:!0,children:(0,A.jsxs)(h.Z,{spacing:.5,children:[(0,A.jsx)(se.Z,{children:"To"}),(0,A.jsx)(U._,{dateAdapter:Q.H,children:(0,A.jsx)(oe.Z,(0,s.Z)((0,s.Z)({type:"date",id:"to_date",placeholder:"Enter task to date"},We("to_date")),{},{error:Boolean(Te.to_date&&Se.to_date)}))}),(0,A.jsx)(le.Z,{children:"Please select date the task should end"})]})})]}),(0,A.jsx)(ie.ZP,{item:!0,xs:12,lg:8,container:!0,children:(0,A.jsxs)(h.Z,{spacing:.5,minWidth:"100%",children:[(0,A.jsx)(se.Z,{children:"Allocated"}),(0,A.jsx)(ae.Z,{children:(0,A.jsxs)(O.Z,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",onChange:function(e){return _e},defaultValue:"personal",children:[(0,A.jsx)(X.Z,{value:"total",onChange:function(e){m(!0),g(!1)},control:(0,A.jsx)(J.Z,{}),label:"Total"}),(0,A.jsx)(X.Z,{value:"group",onChange:function(e){g(!0),m(!1)},control:(0,A.jsx)(J.Z,{}),label:"Group"}),(0,A.jsx)(X.Z,{value:"personal",onChange:function(e){g(!1),m(!1)},control:(0,A.jsx)(J.Z,{}),label:"Personal"})]})}),(0,A.jsxs)("div",{className:x?"hidden":"",children:[(0,A.jsx)(ae.Z,{fullWidth:!0,className:"hidden",children:(0,A.jsx)(pe.Z,{id:"allocDevs",multiple:!0,fullWidth:!0,autoHighlight:!0,freeSolo:!0,style:{display:x?"none":"block"},readOnly:x,disableCloseOnSelect:!0,options:f?z:T,onBlur:Ce.handleBlur,defaultValue:null===n||void 0===n||null===(t=n.allocDevs)||void 0===t?void 0:t.map((function(e){return e.userid})).map((function(e){return be(e)})),getOptionLabel:function(e){return e},onChange:function(e,t){null===T||void 0===T||T.includes(t[t.length-1]);Ce.setFieldValue("allocDevs",t)},filterOptions:function(e,t){var r=we(e,t),n=t.inputValue,i=e.some((function(e){return n===e}));return""===n||i||r.push(n),r},renderOption:function(e,t){return(0,A.jsx)(xe.Z,(0,s.Z)((0,s.Z)({component:"li"},e),{},{children:null!==T&&void 0!==T&&T.some((function(e){return t.includes(e)}))?t:'Add "'.concat(t,'"')}))},renderInput:function(e){return(0,A.jsx)(oe.Z,(0,s.Z)((0,s.Z)((0,s.Z)({},e),{},{placeholder:"Select groups or developers"},We("allocDevs")),{},{error:Ce.touched.allocDevs&&Boolean(Ce.errors.allocDevs)}))},renderTags:function(e,t){return e.map((function(e,r){var n=!1;return Ce.touched.allocDevs&&Ce.errors.allocDevs&&"string"!==typeof Ce.errors.allocDevs&&"object"===typeof Ce.errors.allocDevs[r]&&(n=!0),(0,A.jsx)(he.Z,(0,s.Z)((0,s.Z)({},t({index:r})),{},{variant:"combined",color:n?"error":"secondary",label:(0,A.jsx)(v.Z,{variant:"caption",color:"secondary.dark",children:e}),deleteIcon:(0,A.jsx)(je.Z,{style:{fontSize:"0.875rem"}}),size:"small"}))}))}})}),(0,A.jsx)(le.Z,{children:"Please select allocated people"})]})]})}),(0,A.jsx)("br",{}),(0,A.jsx)("br",{})]})}),(0,A.jsxs)(me.Z,{children:[(0,A.jsx)(k.Z,{variant:"contained",color:"success",endIcon:(0,A.jsx)(fe.Z,{}),disabled:Pe,onClick:function(){var e,t;if(x)t=T;else if(f){var i;null===Fe||void 0===Fe||null===(i=Fe.allocDevs)||void 0===i||i.map((function(e){return function(e){var t,n=e.split("-");t=parseInt(n[0]),r.data.map((function(e){return e.groupid===t?ke.push(e._id):null}))}(e)})),t=ke.map((function(e){return be(e)}))}else t=null===Fe||void 0===Fe?void 0:Fe.allocDevs;var o=null===(e=t)||void 0===e?void 0:e.map((function(e){return L?L[e]:[]})),l=(0,s.Z)({},Fe);l.priority=l.priority,l.allocDevs=o,""===l.task_type.total_type||""===l.task_type.mini_type||void 0===l.task_type.report_type||0===l.allocDevs.length||""===l.from_date||""===l.content||""===l.to_date||l.priority<1||""===l.title||""===l.content?(0,I.WI)((0,$.ss)({open:!0,message:"Please insert all information.",variant:"alert",alert:{color:"error"},close:!0})):(n?(0,I.WI)((0,R.xJ)(l)):(0,I.WI)((0,R.vr)(l)),window.location.reload(),a())},children:"Send"}),(0,A.jsx)(k.Z,{color:"error",variant:"outlined",onClick:a,children:"Cancel"})]})]})})})})};function ye(e){var t=e.columns,r=e.data,n=e.renderRowSubComponent,i=(e.handleAdd,e.getHeaderProps),c=(0,l.Z)(),d=(0,x.Z)(c.breakpoints.down("sm")),u=(0,o.useMemo)((function(){return E.KR}),[]),p={id:"from_date",desc:!1},v=(0,_.useTable)({columns:t,data:r,filterTypes:u,initialState:{pageIndex:0,pageSize:10,hiddenColumns:["avatar","email","_id"],sortBy:[p]}},_.useGlobalFilter,_.useFilters,_.useSortBy,_.useExpanded,_.usePagination,_.useRowSelect),y=v.getTableProps,k=v.getTableBodyProps,b=v.headerGroups,C=v.prepareRow,w=v.setHiddenColumns,S=v.allColumns,P=v.visibleColumns,F=v.rows,W=v.page,D=v.gotoPage,I=v.setPageSize,R=v.state,z=R.globalFilter,q=R.selectedRowIds,H=R.pageIndex,N=R.pageSize,B=R.expanded,O=v.preGlobalFilteredRows,L=v.setGlobalFilter,M=v.setSortBy,V=v.selectedFlatRows;return(0,o.useEffect)((function(){w(["_id"])}),[d]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(T.c,{selected:Object.keys(q).length}),(0,A.jsxs)(h.Z,{spacing:3,children:[(0,A.jsxs)(h.Z,{direction:d?"column":"row",spacing:1,justifyContent:"space-between",alignItems:"center",sx:{p:3,pb:0},children:[(0,A.jsx)(E.KO,{preGlobalFilteredRows:O,globalFilter:z,setGlobalFilter:L,size:"small"}),(0,A.jsxs)(h.Z,{direction:d?"column":"row",alignItems:"center",spacing:1,children:[(0,A.jsx)(T.Ty,{sortBy:p.id,setSortBy:M,allColumns:S}),(0,A.jsx)(T.ZZ,{data:V.length>0?V.map((function(e){return e.original})):r,filename:"customer-list.csv"})]})]}),(0,A.jsxs)(m.Z,(0,s.Z)((0,s.Z)({},y()),{},{children:[(0,A.jsx)(Z.Z,{children:b.map((function(e){return(0,A.jsx)(j.Z,(0,s.Z)((0,s.Z)({},e.getHeaderGroupProps()),{},{sx:{"& > th:first-of-type":{width:"58px"}},children:e.headers.map((function(e){return(0,A.jsx)(f.Z,(0,s.Z)((0,s.Z)({},e.getHeaderProps([{className:e.className},i(e)])),{},{children:(0,A.jsx)(T.RL,{column:e})}))}))}))}))}),(0,A.jsxs)(g.Z,(0,s.Z)((0,s.Z)({},k()),{},{children:[W.map((function(e,t){C(e);var r=e.getRowProps();return(0,A.jsxs)(o.Fragment,{children:[(0,A.jsx)(j.Z,(0,s.Z)((0,s.Z)({},e.getRowProps()),{},{onClick:function(){},sx:{cursor:"pointer",bgcolor:e.isSelected?(0,a.Fq)(c.palette.primary.lighter,.35):"inherit"},children:e.cells.map((function(e){return(0,A.jsx)(f.Z,(0,s.Z)((0,s.Z)({"aria-multiline":!0},e.getCellProps([{className:e.column.className}])),{},{children:e.render("Cell")}))}))})),e.isExpanded&&n({row:e,rowProps:r,visibleColumns:P,expanded:B})]},t)})),(0,A.jsx)(j.Z,{sx:{"&:hover":{bgcolor:"transparent !important"}},children:(0,A.jsx)(f.Z,{sx:{p:2,py:3},colSpan:9,children:(0,A.jsx)(T.bG,{gotoPage:D,rows:F,setPageSize:I,pageSize:N,pageIndex:H})})})]}))]}))]})]})}function ke(e,t){var r=0,n=0;return 0===e.length?n:0===t?(e.map((function(e){r+=e.percentage,n++})),r/n):1===t?(e.map((function(e){100===e.percentage&&n++})),n):void 0}var be=function(){var e=(0,l.Z)(),t=(0,I.v9)((function(e){return e.auth.user})),r=(0,o.useState)(!1),s=(0,i.Z)(r,2),a=s[0],x=s[1],m=(0,o.useState)(null),Z=(0,i.Z)(m,2),j=Z[0],f=Z[1],g=(0,o.useState)(""),_=(0,i.Z)(g,2),T=_[0],F=_[1],W=(0,o.useState)(""),E=(0,i.Z)(W,2),N=E[0],B=E[1],O=(0,o.useState)(!1),L=(0,i.Z)(O,2),M=L[0],V=L[1],G=(0,o.useState)(!0),Y=(0,i.Z)(G,2),K=Y[0],J=Y[1],X=(0,o.useState)([]),Q=(0,i.Z)(X,2),U=Q[0],$=Q[1],ee=(0,I.v9)((function(e){return e.tasks.allTasks})),te=(0,I.v9)((function(e){return e.tasks.trashedTasks})),re=(0,I.I0)(),ne=(0,o.useState)(!0),ie=(0,i.Z)(ne,2),se=ie[0],oe=ie[1],le=(0,o.useState)(),ae=(0,i.Z)(le,2),ce=ae[0],de=ae[1];(0,o.useEffect)((function(){"admin"===(null===t||void 0===t?void 0:t.role)&&(setTimeout((function(){return re((0,R.km)())}),100),setTimeout((function(){return re((0,R.Pe)())}),100))}),[re]),(0,o.useEffect)((function(){D.Z.get("api/user/getid/all").then((function(e){de(e)}))}),[]);var ue=function(){V(!M),j&&!M&&f(null)},pe=function(){x(!a)};(0,o.useEffect)((function(){$(K?ee:te)}),[K,ee,te]);var xe=(0,o.useMemo)((function(){return[{Header:"#",accessor:"_id",className:"cell-center"},{Header:"Type",accessor:"task_type.mini_type"},{Header:"Title",accessor:"title",Cell:function(e){var t=e.row;return(0,A.jsx)(v.Z,{style:{maxWidth:"100px",overflowWrap:"break-word"},sx:{display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:3},children:t.cells[1].value})}},{Header:"ReportType",accessor:"task_type.report_type",Cell:function(e){var t=e.row;return 0===t.cells[2].value?(0,A.jsx)("p",{style:{textAlign:"center"},children:(0,A.jsx)(d.Z,{color:"primary"})}):1===t.cells[2].value?(0,A.jsx)("p",{style:{textAlign:"center"},children:(0,A.jsx)(c.Z,{color:"primary"})}):(0,A.jsx)("p",{style:{textAlign:"center"},children:(0,A.jsx)(u.Z,{color:"primary"})})}},{Header:"FromDate",accessor:"from_date",Cell:function(e){var t=e.row.values.from_date.toString();return(0,A.jsx)(h.Z,{direction:"row",spacing:1.5,alignItems:"center",children:(0,A.jsx)(h.Z,{spacing:0,children:(0,A.jsx)(v.Z,{variant:"subtitle1",children:t.slice(0,10)})})})}},{Header:"ToDate",accessor:"to_date",Cell:function(e){var t=e.row.values.to_date.toString();return(0,A.jsx)(h.Z,{direction:"row",spacing:1.5,alignItems:"center",children:(0,A.jsx)(h.Z,{spacing:0,children:(0,A.jsx)(v.Z,{variant:"subtitle1",children:t.slice(0,10)})})})}},{Header:"PRIORITY",accessor:"priority",Cell:function(e){var t=e.row;return(0,A.jsx)("p",{style:{textAlign:"center"},children:t.cells[5].value})}},{Header:"Assignees",accessor:"allocDevs",Cell:function(e){var t=e.row;return(0,A.jsx)("p",{style:{textAlign:"center"},children:t.cells[6].value.length})}},{Header:"completeness",accessor:"percentage",Cell:function(e){var t=e.row;return(0,A.jsx)("p",{style:{textAlign:"center"},children:0===t.cells[2].value?ke(t.cells[6].value,t.cells[2].value).toFixed(1)+"%":ke(t.cells[6].value,t.cells[2].value)})}},{Header:"Actions",className:"cell-center",disableSortBy:!0,Cell:function(t){var r=t.row;return(0,A.jsx)(h.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:0,children:!0===K?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(y.Z,{title:"Edit",children:(0,A.jsx)(w.Z,{color:"primary",onClick:function(e){e.stopPropagation(),f(r.values),ue()},children:(0,A.jsx)(H.Z,{twoToneColor:e.palette.primary.main})})}),(0,A.jsx)(y.Z,{title:"Delete",children:(0,A.jsx)(w.Z,{color:"error",onClick:function(e){e.stopPropagation(),f(r.values),pe(),F(r.values._id),B(r.values.title)},children:(0,A.jsx)(p.Z,{color:"success"})})})]}):(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(y.Z,{title:"Restore",children:(0,A.jsx)(w.Z,{color:"success",onClick:function(e){e.stopPropagation(),f(r.values),pe(),F(r.values._id),B(r.values.title)},children:(0,A.jsx)(z.Z,{})})})})})}}]}),[e,K]),he=(0,o.useCallback)((function(e){var t=e.row;return(0,A.jsx)(P.Z,{data:U[Number(t.id)]})}),[U]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(h.Z,{direction:"row",style:{display:"flex",justifyContent:"space-between"},children:[se&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(k.Z,{variant:"contained",size:"large",sx:{borderWidth:"1px",borderStyle:"solid",float:"left",color:"success"},onClick:function(e){return ue()},children:"Create Task"}),(0,A.jsx)(v.Z,{fontSize:36,children:"Assigned Tasks"})]}),!se&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(v.Z,{fontSize:.1,children:"."}),(0,A.jsx)(v.Z,{fontSize:36,children:"Achived Tasks"})]}),(0,A.jsx)(k.Z,{variant:"contained",size:"large",sx:{borderWidth:"1px",borderStyle:"solid",backgroundColor:"#00bcd4",float:"right"},onClick:function(e){return J((function(e){return!e})),void oe(!se)},children:!0===K?"Achived Tasks":"Total Tasks"})]}),(0,A.jsx)("br",{}),(0,A.jsxs)(n.Z,{content:!1,children:[(0,A.jsx)(C.Z,{children:(0,A.jsx)(ye,{columns:xe,data:U,handleAdd:ue,renderRowSubComponent:he,getHeaderProps:function(e){return e.getSortByToggleProps()}})}),(0,A.jsx)(q,{title:T,name:N,open:a,isRestore:K,handleClose:pe}),(0,A.jsx)(b.Z,{maxWidth:"sm",TransitionComponent:S.S,keepMounted:!0,fullWidth:!0,onClose:ue,open:M,sx:{"& .MuiDialog-paper":{p:0},transition:"transform 225ms"},"aria-describedby":"alert-dialog-slide-description"}),(0,A.jsx)(b.Z,{open:M,onClose:pe,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",maxWidth:"xl",fullWidth:!0,style:{position:"fixed"},children:(0,A.jsx)(ve,{users:ce,customer:j,onCancel:ue})})]})]})},_e=r(84793),Ce=r(47131),we=r(60515),Se=function(e){var t,r=e.TaskCards,n=(0,I.v9)((function(e){return e.auth}));return(0,A.jsxs)(A.Fragment,{children:[r.length>0&&r.slice(0,100).sort((function(e,t){return e.from_date-t.from_date})).map((function(e,t){return(0,A.jsx)(ie.ZP,{item:!0,xs:12,sx:{p:.6},children:(0,A.jsx)(we.Z,{TaskCard:e})},t)})),0===r.length&&(0,A.jsx)(v.Z,{children:"No Task Assigned"}),"admin"===(null===(t=n.user)||void 0===t?void 0:t.role)&&(0,A.jsx)(Ce.Z,{style:{float:"right"},children:(0,A.jsx)(_e.Z,{color:"primary",fontSize:"large"})})]})},Te=function(){var e,t,r=(0,I.v9)((function(e){return e.auth})),n=(0,I.v9)((function(e){return e.tasks})),i=(0,I.I0)();return(0,o.useEffect)((function(){setTimeout((function(){var e;return i((0,R.Kb)(null===(e=r.user)||void 0===e?void 0:e._id))}),100),setTimeout((function(){var e;return i((0,R.dc)(null===(e=r.user)||void 0===e?void 0:e.groupid))}),100)}),[i,null===(e=r.user)||void 0===e?void 0:e._id,null===(t=r.user)||void 0===t?void 0:t.groupid]),(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(ie.ZP,{container:!0,spacing:2,children:[(0,A.jsxs)(ie.ZP,{item:!0,xs:12,lg:6,md:6,sm:12,children:["Team tasks",(0,A.jsx)(Se,{TaskCards:n.groupTasks})]}),(0,A.jsxs)(ie.ZP,{item:!0,xs:12,lg:6,md:6,sm:12,children:["My tasks",(0,A.jsx)(Se,{TaskCards:n.personalTasks})]})]})})},Pe=function(){var e,t=(0,I.v9)((function(e){return e.auth})),r=(0,I.v9)((function(e){return e.tasks})),n=(0,I.I0)();return(0,o.useEffect)((function(){setTimeout((function(){var e;return n((0,R.Kb)(null===(e=t.user)||void 0===e?void 0:e._id))}),100)}),[n,null===(e=t.user)||void 0===e?void 0:e._id]),(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(ie.ZP,{container:!0,spacing:2,children:(0,A.jsx)(ie.ZP,{item:!0,xs:12,children:(0,A.jsx)(Se,{TaskCards:r.personalTasks})})})})},Fe=function(){var e,t,r,i=(0,I.v9)((function(e){return e.auth}));return(0,A.jsxs)(A.Fragment,{children:["admin"===(null===(e=i.user)||void 0===e?void 0:e.role)&&(0,A.jsx)(be,{}),"Team Manager"===(null===(t=i.user)||void 0===t?void 0:t.role)&&(0,A.jsx)(n.Z,{style:{fontSize:"16px"},children:(0,A.jsx)(Te,{})}),"Developer"===(null===(r=i.user)||void 0===r?void 0:r.role)&&(0,A.jsx)(n.Z,{style:{textAlign:"center",fontSize:"20px"},children:(0,A.jsx)(Pe,{})})]})}}}]);